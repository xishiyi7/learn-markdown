# 深入浅出Node.js

###### 1. Node 简介

> 1.1 Node 特点

 ` 1.1.1 异步IO、事件与回调函数、单线程、跨平台`
 
> 1.2 应用场景

 ` 1.2.1 I/O 密集型、分布式应用`
 
###### 2. 模块机制 

> 2.1 CommonJS

 ` 2.1.1 模块引用 require()`
 
 ` 2.1.2 模块定义 exports对象，需要注意，exports是module的属性，如果使用了module.exports，会覆盖掉exports`
 
> 2.2 Node 模块实现

 ` 2.2.1 在node中引入模块，需要经历以下三步：路径分析、文件定位、编译执行`
 
 ` 2.2.2 核心模块：直接进内存中，优先分析路径，只需要一步；文件模块：运行时动态加载，需要完整三步`
 
 ` 2.2.3 包目录：`  
 
     a. package.json 包描述文件
     b. bin 可执行二进制文件
     c. lib JS代码目录
     d. doc 文档目录
     e. test 单元测试用例代码目录
 
###### 3. Node的异步I/O

> 3.1 I/O 

 ` 3.1.1 操作系统内核对于I/O只有两种方式：阻塞与非阻塞` 
 
 ` 3.1.2 现实的异步I/O：多线程`

> 3.2 Node的异步I/O

 ` 3.2.1 关键字：单线程、事件循环、观察者、请求对象、执行回调`
 
> 3.3 非I/O的异步API

 ` 3.3.1 定时器：setTimeout、setInterval、setImmediate；及 process.nextTick`
 
###### 4. 异步编程

> 4.1 难点

 ` 4.1.1 异步编程的难点在于：`
 
     a. 异常处理
     b. 函数嵌套过深
     c. 阻塞代码
     d. 多线程编程
     e. 异步转同步
 
> 4.2 异步编程解决方案

 ` 4.2.1 主要解决方案包括：`
 
      a. 事件发布/订阅模式
      b. Promise/Deferred模式
      c. 流程控制库：尾触发与Next、async、Step

 ` 4.2.2 异步并发控制：`
 
      a. 拒绝模式
      b. 超时访问
      c. asycn的解决方案

###### 5. 内存控制
 
 > 5.1 V8
 
 ` 5.1.1 V8的内存限制：64位系统约为1.4GB、32位系统约为0.7GB`
 
 ` 5.1.2 V8的垃圾回收机制：Mark-Sweep、Mark-Compact、Scavenge`
 
> 5.2 高效使用内存

 ` 5.2.1 作用域`
 
 ` 5.2.2 闭包`
 
> 5.3 内存泄漏

 ` 5.3.1 造成内存泄漏的原因：`
 
     a. 缓存
     b. 队列消费不及时
     c. 作用域未释放

###### 6. 理解Buffer

> 6.1 Buffer对象

 ` 6.1.1 类似于数组，但其元素为16进制的两位数`
 
 ` 6.1.2 可以与字符串之间相互转换；可以进行拼接，方便一段一段传输；在文件I/O和网络I/O中广泛使用`
 
###### 7. 网络编程

> 7.1 TCP服务

> 7.2 UDP服务

> 7.3 HTTP服务

> 7.4 WebSocket服务

> 7.5 网络服务与安全

 ` 7.5.1 TLS/SSL`
 
 ` 7.5.2 TLS服务`
 
 ` 7.5.3 HTTPS服务`
 
###### 8. 构建Web应用

> 8.1 Web基础

 ` 8.1.1 Cookie、Session、缓存、Basic认证、`

> 8.2 数据上传

 ` 8.2.1 数据格式：表单数据、JSON/XML文件、附件`
 
> 8.3 文件路径类型

 ` 8.3.1 静态文件与动态文件`

> 8.4 MVC

 ` 8.4.1 手工映射、正则匹配、参数解析`
 
 ` 8.4.2 自然映射`
 
> 8.5 RESTful

###### 9. 玩转进程

> 9.1 服务模型的变迁
  ```
  a. 同步
  b. 复制进程
  c. 多线程
  d. 事件驱动
  ```

> 9.2 多进程架构

 ` 9.2.1 clild_process模块`
   ```
   a. spawn() 启动一个子进程来执行命令
   b. exec() 启动一个子进程来执行命令，但有回调函数来获取子进程的状况
   c. execFile() 启动一个子进程来执行可执行文件
   d. fork() 与sapwn类似，不同在于其创建的子进程只需指定要执行的js文件模块即可
   ```

 ` 9.2.2 进程间通信: onmessage()与postMessage()`  
 ` 9.2.3 句柄传递: child.send(message,[sendHandle]), 第二个参数就是句柄`

> 9.3 集群稳定之路

 ` 9.3.1 进程事件: send、message、error、exit、close、disconnect；已经kill方法`  
 ` 9.3.2 自动重启: 自杀信号、限量重启`
 ` 9.3.3 负载均衡`
 ` 9.3.4 状态共享: 第三方数据存储、主动通知`
 ` 9.3.5 Cluster模块`
 
